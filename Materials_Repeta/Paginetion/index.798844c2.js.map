{"mappings":"YAAe,SAAAA,EAAqBC,GAClC,MAAMC,IAAEA,EAAGC,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,GAAgBL,EAExDA,EAASM,KAAIC,GACJ,+BAEMN,yFAEKA,WAAaE,oCACnBA,mCACUC,uBACXC,0D,CCXf,MAEMG,EAAU,CACdC,QAAS,CACPC,cAJY,qCCqBhB,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,mBACnCC,kBAAmBF,SAASC,cAAc,2BAEtCE,EAAc,ICzBL,MACbC,aAAYC,SAAEA,EAAQC,OAAEA,GAAS,IAC/BC,KAAKC,KAAOD,KAAKE,QAAQJ,GAEzBC,GAAUC,KAAKG,M,CAGjBD,QAAQJ,GACN,MAAMG,EAAO,GAKb,OAJAA,EAAKG,OAASX,SAASC,cAAcI,GACrCG,EAAKI,MAAQJ,EAAKG,OAAOV,cAAc,UACvCO,EAAKK,QAAUL,EAAKG,OAAOV,cAAc,YAElCO,C,CAGTM,SACEP,KAAKC,KAAKG,OAAOI,UAAW,EAC5BR,KAAKC,KAAKI,MAAMI,YAAc,eACnBT,KAANC,KAAKK,QAAQI,UAAUC,IAAI,Y,CAGlCC,UACEZ,KAAKC,KAAKG,OAAOI,UAAW,EAC5BR,KAAKC,KAAKI,MAAMI,YAAc,eAC9BT,KAAKC,KAAKK,QAAQI,UAAUG,OAAO,Y,CAGrCC,OACEd,KAAKC,KAAKG,OAAOM,UAAUG,OAAO,Y,CAGpCV,OACEH,KAAKC,KAAKG,OAAOM,UAAUC,IAAI,Y,GDRC,CAClCb,SAAU,4BACVC,QAAQ,IAEJgB,EAAiB,IDrBR,MACblB,cACEG,KAAKgB,YAAc,GACnBhB,KAAKiB,KAAO,C,CAGdC,gBACE,MAAMrC,EAAM,uCAA4BmB,KAAKgB,2CAA2ChB,KAAKiB,OAE7F,OAAOE,MAAMtC,EAAKO,GACfgC,MAAKC,GAAYA,EAASC,SAC1BF,MAAK,EAACxC,SAAEA,MACPoB,KAAKuB,gBACE3C,I,CAIb2C,gBACEvB,KAAKiB,MAAQ,C,CAGfO,YACExB,KAAKiB,KAAO,C,CAGVQ,YACF,OAAOzB,KAAKgB,W,CAGVS,UAAMC,GACR1B,KAAKgB,YAAcU,C,GCWvB,SAASC,IACP/B,EAAYgB,UACZG,EAAeG,gBAAgBE,MAAKxC,KAMtC,SAA8BA,GAC5BW,EAAKI,kBAAkBiC,mBAAmB,YAAajD,EAAYC,G,CANjEiD,CAAqBjD,GACrBgB,EAAYW,QAAQ,G,CAtBxBhB,EAAKC,WAAWsC,iBAAiB,UAGjC,SAAkBC,GAKhB,GAJAA,EAAEC,iBAEFjB,EAAeU,MAAQM,EAAEE,cAAcC,SAAST,MAAMU,MAEzB,KAAzBpB,EAAeU,MACjB,OAAOW,MAAM,2BAGfxC,EAAYkB,OACZC,EAAeS,YAkBfjC,EAAKI,kBAAkB0C,UAAY,GAhBnCV,G,IAdF/B,EAAYK,KAAKG,OAAO0B,iBAAiB,QAASH,E","sources":["src/Materials_Repeta/Paginetion/templates/articles.js","src/Materials_Repeta/Paginetion/js/news-service.js","src/Materials_Repeta/Paginetion/index.js","src/Materials_Repeta/Paginetion/js/components/load-more-btn.js"],"sourcesContent":["export default function articlesTpl(articles) {\n  const { url, urlToImage, title, author, description } = articles;\n\n  articles.map(article => {\n    return `\n    <li>\n    \t<a href= \"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t<article>\n          <img src=\"${url}\" alt=\"${title}\" width=\"480\" />\n          <h2>${title}</h2>\n          <p>Posted by: ${author}</p>\n          <p>${description}</p>\n        </article>\n      </a>\n    </li>\n    `;\n  });\n}\n","const API_KEY = '4330ebfabc654a6992c2aa792f3173a3';\nconst BASE_URL = 'https://newsapi.org/v2';\nconst options = {\n  headers: {\n    Authorization: API_KEY,\n  },\n};\n\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    const url = `${BASE_URL}/everything?q=${this.searchQuery}&language=en&pageSize=5&page=${this.page}`;\n\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(({ articles }) => {\n        this.incrementPage();\n        return articles;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","/*\n * - Пагинация\n *   - страница и кол-во на странице\n * - Загружаем статьи при сабмите формы\n * - Загружаем статьи при нажатии на кнопку «Загрузить еще»\n * - Обновляем страницу в параметрах запроса\n * - Рисуем статьи\n * - Сброс значения при поиске по новому критерию\n *\n * https://newsapi.org/\n * 4330ebfabc654a6992c2aa792f3173a3\n * http://newsapi.org/v2/everything?q=cat&language=en&pageSize=5&page=1\n */\n\nimport articlesTpl from './templates/articles';\nimport './css/common.css';\nimport second from './css/styles.css';\n\nimport NewsApiService from './js/news-service';\nimport LoadMoreBtn from './js/components/load-more-btn';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n};\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '[data-action=\"load-more\"]',\n  hidden: true,\n});\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nloadMoreBtn.refs.button.addEventListener('click', fetchArticles);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  newsApiService.query = e.currentTarget.elements.query.value;\n\n  if (newsApiService.query === '') {\n    return alert('Введи что-то нормальное');\n  }\n\n  loadMoreBtn.show();\n  newsApiService.resetPage();\n  clearArticlesContainer();\n  fetchArticles();\n}\n\nfunction fetchArticles() {\n  loadMoreBtn.disable();\n  newsApiService.fetchArticles().then(articles => {\n    appendArticlesMarkup(articles);\n    loadMoreBtn.enable();\n  });\n}\n\nfunction appendArticlesMarkup(articles) {\n  refs.articlesContainer.insertAdjacentHTML('beforeend', articlesTpl(articles));\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n\n    hidden && this.hide();\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n\n    return refs;\n  }\n\n  enable() {\n    this.refs.button.disabled = false;\n    this.refs.label.textContent = 'Показать ещё';\n    this.refs.spinner.classList.add('is-hidden');\n  }\n\n  disable() {\n    this.refs.button.disabled = true;\n    this.refs.label.textContent = 'Загружаем...';\n    this.refs.spinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n}\n"],"names":["$0a805f2ed9ec13be$export$2e2bcd8739ae039","articles","url","urlToImage","title","author","description","map","article","$5a7dfcd3cbc78c2a$var$options","headers","Authorization","$21063b04d6df6246$var$refs","searchForm","document","querySelector","articlesContainer","$21063b04d6df6246$var$loadMoreBtn","constructor","selector","hidden","this","refs","getRefs","hide","button","label","spinner","enable","disabled","textContent","classList","add","disable","remove","show","$21063b04d6df6246$var$newsApiService","searchQuery","page","fetchArticles","fetch","then","response","json","incrementPage","resetPage","query","newQuery","$21063b04d6df6246$var$fetchArticles","insertAdjacentHTML","$21063b04d6df6246$var$appendArticlesMarkup","addEventListener","e","preventDefault","currentTarget","elements","value","alert","innerHTML"],"version":3,"file":"index.798844c2.js.map"}